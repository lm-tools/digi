{{<layout}}
{{$pageTitle}}{{#__}}search.pageTitle{{/__}}{{/pageTitle}}
{{$applicationContent}}

<h2 class="heading-xlarge" data-test="header">{{#__}}search.header{{/__}}</h2>
<div class="grid-row">
  <section class="column-one-third search-page-filters" aria-label="{{#__}}search.searchSectionAria{{/__}}">
    <form action="{{basePath}}/search" method="get">

      <div class="govuk-option-select filter-field-text">
        <div class="container-head">
          <label class="option-select-label" for="keywords">
            {{#__}}search.searchButtonLabel{{/__}}
          </label>
        </div>

        <input type="search" name="search" id="keywords" value="{{ search }}" maxlength="200" data-test="search-input">
      </div>

      <div class="govuk-option-select link-select">
        <div class="container-head">
          <label class="option-select-label" for="keywords">
            {{#__}}search.categorySelectOptionsLabel{{/__}}
          </label>
        </div>
        <ul aria-label="Search Categories">
          {{#categories}}
            <span data-test="category-link">
              <a href="{{ basePath }}/search?search={{ uriEncodedTitle }}" data-test="link">
                <li data-test="category">
                  {{ title }}
                </li>
              </a>
            </span>
          {{/categories}}
        </ul>
      </div>

      <div class="form-group">
        <button class="button" type="submit" data-test="search-button">{{#__}}search.searchButton{{/__}}</button>
      </div>
    </form>
  </section>
  <section class="column-two-thirds" aria-label="{{#__}}search.resultsSectionAria{{/__}}">

    <p class="search-summary" data-test="search-summary">
      <span class="search-summary-count">{{resourceList.length}}</span> {{resultsSummaryCopy}} <strong>{{ search }}</strong>
    </p>

    {{^hasResults}}
      <p class="search-message" data-test="search-message">
        {{#__}}search.emptyResults{{/__}}
      </p>
    {{/hasResults}}

    {{#resourceList}}
      <div class="search-result" data-test="resource">
        <h2 class="search-result-title" data-test="title">
          <a href="{{ basePath }}/resources/{{ resourceId }}?fromSearch={{search}}" data-test="resource-{{resourceId}}">
            {{ title }}
          </a>
        </h2>
        <p class="search-result-excerpt" data-test="summary">
          {{summary}}
        </p>
      </div>
    {{/resourceList}}
  </section>
</div>

{{/applicationContent}}

{{/layout}}
